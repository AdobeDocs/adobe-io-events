"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[2576],{5310:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return o},default:function(){return p}});var n=a(87462),i=a(63366),d=(a(15007),a(64983)),r=a(91515),l=["components"],o={},s={_frontmatter:o},m=r.Z;function p(e){var t=e.components,a=(0,i.Z)(e,l);return(0,d.mdx)(m,(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"signature-verification-for-events"},"Signature Verification for Events"),(0,d.mdx)("p",null,"Your webhook URL must be accessible from the open internet, however this means third-party actors can send forged requests, tricking your application into handling fake events."),(0,d.mdx)("p",null,"To prevent this from happening, Adobe I/O Events has a resilient and secure event validation process in place as defined below that allows users to secure their webhook. "),(0,d.mdx)("h2",{id:"digital-signatures-for-security-verification"},"Digital Signatures for Security Verification"),(0,d.mdx)("p",null,"Adobe I/O Events does below security validations for each event delivered to your webhook. "),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"Adobe I/O Events sends an additional field of ",(0,d.mdx)("inlineCode",{parentName:"li"},"recipient_client_id")," as part of your event payload."),(0,d.mdx)("li",{parentName:"ul"},"The event payload is signed digitally using a fixed public/private key pair generated by Adobe I/O Events. The digital signature is sent as a webhook request header."),(0,d.mdx)("li",{parentName:"ul"},"Adobe I/O Events sends the relative path of public key, which is served from our fixed Adobe domain ",(0,d.mdx)("a",{parentName:"li",href:"https://static.adobeioevents.com"},"static.adobeioevents.com"),", as webhook request headers.")),(0,d.mdx)("p",null,"I/O Events sends 2 digital signatures as webhook request headers and they are available via the header fields\n",(0,d.mdx)("inlineCode",{parentName:"p"},"x-adobe-digital-signature-1")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"x-adobe-digital-signature-2")," respectively."),(0,d.mdx)("p",null,"I/O Events also sends relative paths of 2 public keys corresponding to the private keys used to generate the digital signatures. These public keys are publicly accessible using our Adobe domain ",(0,d.mdx)("a",{parentName:"p",href:"https://static.adobeioevents.com"},"static.adobeioevents.com")," and the webhook request header fields ",(0,d.mdx)("inlineCode",{parentName:"p"},"x-adobe-public-key1-path")," and  ",(0,d.mdx)("inlineCode",{parentName:"p"},"x-adobe-public-key2-path")," respectively. The SDK fetches the public keys using the Adobe domain and their respective relative paths."),(0,d.mdx)("h3",{id:"verifying-the-signature"},"Verifying the Signature"),(0,d.mdx)("p",null,"Once the SDK has the public keys fetched as plain text, it verifies the digital signatures by following the steps as below"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"decrypt the message digest using the public key"),(0,d.mdx)("li",{parentName:"ul"},"compute the hash message digest of the event payload (available in the webhook request body) using the same hash function algorithm ",(0,d.mdx)("inlineCode",{parentName:"li"},"rsa-sha256")," used by I/O Events during signing"),(0,d.mdx)("li",{parentName:"ul"},"validate each signature by comparing ",(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},"the message digest computed by hashing "),(0,d.mdx)("li",{parentName:"ul"},"and the digest received after decrypting the signature using the public key"))),(0,d.mdx)("li",{parentName:"ul"},"verify if any one of the signatures validation is successful, then the event can be considered valid.")),(0,d.mdx)("p",null,"Below SDK method allows you to pass the received digital signature headers, relative paths of public keys and the JSON payload delivered to the webhook to check its authenticity. The JSON payload contains the ",(0,d.mdx)("inlineCode",{parentName:"p"},"recipient-client-id")," which will be matched against your own webhook registration client id passed to this SDK method. The method returns ",(0,d.mdx)("inlineCode",{parentName:"p"},"true")," if any one of the digital signature validation is successful, otherwise it returns ",(0,d.mdx)("inlineCode",{parentName:"p"},"false"),". "),(0,d.mdx)("p",null,"This SDK api can be used in any digital signature verification implementation for your consumer app to verify the authenticity of events coming from Adobe I/O Events.  "),(0,d.mdx)("h3",{id:"method"},"Method"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-javascript"},"verifyDigitalSignatureForEvent(event, recipientClientId, [signatureOptions]) â‡’ boolean\n")),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Param"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"event"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("code",null,"object")),(0,d.mdx)("td",{parentName:"tr",align:null},"JSON payload delivered to the registered webhook URL")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"recipientClientId"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("code",null,"string")),(0,d.mdx)("td",{parentName:"tr",align:null},"Target recipient client id retrieved from the Adobe I/O Console integration")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"[signatureOptions]"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("a",{parentName:"td",href:"#SignatureOptions"},(0,d.mdx)("code",null,"SignatureOptions"))),(0,d.mdx)("td",{parentName:"tr",align:null},"Map of digital signature header fields defined in SignatureOptions")))),(0,d.mdx)("h4",{id:"signatureoptions--object"},"SignatureOptions : ",(0,d.mdx)("inlineCode",{parentName:"h4"},"object")),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Properties")),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Name"),(0,d.mdx)("th",{parentName:"tr",align:null},"Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"[digiSignature1]"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("code",null,"string")),(0,d.mdx)("td",{parentName:"tr",align:null},"Value of digital signature retrieved from the x-adobe-digital-signature1 header")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"[digiSignature2]"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("code",null,"string")),(0,d.mdx)("td",{parentName:"tr",align:null},"Value of digital signature retrieved from the x-adobe-digital-signature2 header")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"[publicKeyPath1]"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("code",null,"string")),(0,d.mdx)("td",{parentName:"tr",align:null},"Relative path of ioevents public key retrieved from the x-adobe-public-key1-path header")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"[publicKeyPath2]"),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("code",null,"string")),(0,d.mdx)("td",{parentName:"tr",align:null},"Relative path of ioevents public key retrieved from the x-adobe-public-key2-path header")))),(0,d.mdx)("h3",{id:"sample-headers"},"Sample Headers"),(0,d.mdx)("p",null,"Headers received as part of POST to webhook URL:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-http"},"Request URL: <webhook_url>\nRequest method: POST\nContent-Type: application/json; charset=utf-8\naccept-encoding: deflate,compress,identity\nuser-agent: Adobe/1.0\nx-adobe-delivery-id: <id>\nx-adobe-event-code: <event_code>\nx-adobe-event-id: <event_id>\nx-adobe-provider: <provider_name>\nx-adobe-signature: <signature>\nx-adobe-digital-signature-1: <digital_signature_1>\nx-adobe-digital-signature-2: <digital_signature_2>\nx-adobe-public-key1-path: <public_key1_relative_path>\nx-adobe-public-key2-path: <public_key2_relative_path>\n")),(0,d.mdx)("h3",{id:"response"},"Response"),(0,d.mdx)("p",null,"If signature is valid, returns ",(0,d.mdx)("inlineCode",{parentName:"p"},"true")," otherwise returns ",(0,d.mdx)("inlineCode",{parentName:"p"},"false"),"."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-sdk-sdk-signature-verification-md-b877af89276c6c6b2f98.js.map