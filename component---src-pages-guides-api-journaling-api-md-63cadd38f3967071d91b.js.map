{"version":3,"file":"component---src-pages-guides-api-journaling-api-md-63cadd38f3967071d91b.js","mappings":"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","sources":["webpack://dev-site-documentation-template/./src/pages/guides/api/journaling_api.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/adobe-io-events/adobe-io-events/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"adobe-io-events-journaling-api\"\n    }}>{`Adobe I/O Events Journaling API`}</h1>\n    <h2 {...{\n      \"id\": \"what-is-a-journal\"\n    }}>{`What is a Journal?`}</h2>\n    <p>{`A Journal, is an ordered list of events - much like a ledger or a log where new entries (events) are added to the end of the ledger and the ledger keeps growing.\nYour application can start reading the ledger from any position and then continue reading \"newer\" entries (events) in the ledger, much like turning pages forward.`}</p>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"../journaling_intro.md\"\n      }}>{`Journaling`}</a>{`, in contrast to `}<a parentName=\"p\" {...{\n        \"href\": \"../index.md\"\n      }}>{`webhooks`}</a>{`, is a `}<em parentName=\"p\">{`pull`}</em>{` model of consuming events, whereas webhooks are a `}<em parentName=\"p\">{`push`}</em>{` model.\nIn journaling your application will issue a series of API calls to pull batches of one or more events from the journal.\nThe Journaling API response contains event data and the unique position in the journal for every event returned in that batch.`}</p>\n    <p>{`The position of an event in the journal is significant. For your application to continue reading \"newer\" events in the journal, the position of the last event needs to be supplied back to the Journaling API in order to fetch events \"newer\" than the last event.`}</p>\n    <p>{`A batch of events returned by the Journaling API looks similar to the following JSON object.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n   \"events\": [ // an ordered list of events\n      {\n         \"position\": \"string\", // unique position of this event in the journal\n         \"event\": {\n            \"key\": \"value\" // actual event data\n         }\n      }\n   ],\n   \"_page\": {\n      \"last\": \"string\", // position corresponding to the last event returned in this batch\n      \"count\": 1 // number of events returned in this batch\n   }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"fetching-events-from-the-journaling-api\"\n    }}>{`Fetching events from the journaling API`}</h2>\n    <h3 {...{\n      \"id\": \"finding-the-journaling-endpoint-url\"\n    }}>{`Finding the journaling endpoint URL`}</h3>\n    <p>{`Every event registration has a corresponding unique journaling endpoint URL. This URL is displayed on the Adobe Developer Console -`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Log into the `}<a parentName=\"p\" {...{\n            \"href\": \"/adobe-io-events/console\"\n          }}>{`Adobe Developer Console`}</a>{` and open your project.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Navigate to the appropriate Event registration using the left sidebar under the Events section.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Under the Event Delivery Method section, copy the URL for the unique api endpoint.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Be sure to add the `}<inlineCode parentName=\"p\">{`I/O Management API`}</inlineCode>{` as a service in your integration in order to be able to invoke the journaling API. Click on Add to project > API > I/O Management API.`}</p>\n      </li>\n    </ol>\n    <h3 {...{\n      \"id\": \"obtaining-an-access-token-to-call-the-api\"\n    }}>{`Obtaining an access token to call the API`}</h3>\n    <p>{`To issue the API call, you need to provide three additional parameters:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Your integration's API key (Client ID). It can be found either on the Project overview page, in the Credentials tab of the Event registration, or on the specific credential page.`}</li>\n      <li parentName=\"ul\">{`An OAuth Server-to-Server token. See `}<a parentName=\"li\" {...{\n          \"href\": \"/adobe-io-events/developer-console/docs/guides/authentication/ServerToServerAuthentication/#oauth-server-to-server-credential\"\n        }}>{`Authentication: Creating an OAuth Server-to-Server Token`}</a>{` for how to create an OAuth Server-to-Server token.`}</li>\n      <li parentName=\"ul\">{`Your organization id in the format `}<inlineCode parentName=\"li\">{`some_id@AdobeOrg`}</inlineCode>{`. This is also displayed in the Overview tab for your integration in the Adobe Developer Console.`}</li>\n    </ul>\n    <p>{`You combine the URL you got from the Journaling section of the event details with your API key, OAuth Server-to-Server token and organization ID to make the call.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/xxxxx/integrations/xxxx/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx \\\\\n  -H \"x-ims-org-id: $ORG_ID\" \\\\\n  -H \"Authorization: Bearer $oauth_s2s_token\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"fetching-your-first-batch-of-events-from-the-journal\"\n    }}>{`Fetching your first batch of events from the journal`}</h3>\n    <p>{`The journaling endpoint URL, when called without any query parameters fetches the batch of the `}<a parentName=\"p\" {...{\n        \"href\": \"#oldest-available-events\"\n      }}>{`\"oldest\" available events`}</a>{` in the journal. These events are \"older\" than all other events and, hence, once your application starts consuming \"newer\" events from this position it will eventually consume all events present in the journal.`}</p>\n    <p>{`For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`HTTP/1.1 200 OK\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=moose:e7ba778b-dace-4994-96e7-da80e7125233:2159b72c-e284-4899-b572-08da250e3614>; rel=\"next\"\n\n{\n   \"events\":[\n      {\n         \"position\":\"camel:5aeb25cc-1b15-4f26-a082-9c213005dba8:ff244403-ca7c-4993-bbda-3c8915ce0b32\",\n         \"event\":{\n            \"@id\":\"urn:oeid:aem:199e85da-dd54-4966-95ba-13cf544964dc\",\n            \"@type\":\"xdmCreated\",\n            \"activitystreams:published\":\"2018-03-06T15:19:03-08\",\n            \"activitystreams:to\":{\n               \"@type\":\"xdmImsOrg\",\n               \"xdmImsOrg:id\":\"01DC1FC45956A5810A494138@AdobeOrg\"\n            },\n            \"activitystreams:generator\":{\n               \"@type\":\"xdmContentRepository\",\n               \"xdmContentRepository:root\":\"http://localhost-roberto-aem63:4502\"\n            },\n            \"activitystreams:actor\":{\n               \"@id\":\"healthcheck-user\",\n               \"@type\":\"xdmAemUser\"\n            },\n            \"activitystreams:object\":{\n               \"@type\":\"xdmAsset\",\n               \"xdmAsset:asset_name\":\"healthcheck.png\",\n               \"xdmAsset:path\":\"/content/dam/healthcheck.png\",\n               \"xdmAsset:format\":\"image/png\"\n            },\n            \"xdmEventEnvelope:objectType\":\"xdmAsset\"\n         }\n      },\n      {\n         \"position\":\"moose:e7ba778b-dace-4994-96e7-da80e7125233:2159b72c-e284-4899-b572-08da250e3614\",\n         \"event\":{\n            \"@id\":\"urn:oeid:aem:61930ae6-ff2a-48fb-881d-078e862c3811\",\n            \"@type\":\"xdmCreated\",\n            \"activitystreams:published\":\"2018-03-06T15:19:59-08\",\n            \"activitystreams:to\":{\n               \"@type\":\"xdmImsOrg\",\n               \"xdmImsOrg:id\":\"01DC1FC45956A5810A494138@AdobeOrg\"\n            },\n            \"activitystreams:generator\":{\n               \"@type\":\"xdmContentRepository\",\n               \"xdmContentRepository:root\":\"http://localhost-roberto-aem63:4502\"\n            },\n            \"activitystreams:actor\":{\n               \"@id\":\"healthcheck-user\",\n               \"@type\":\"xdmAemUser\"\n            },\n            \"activitystreams:object\":{\n               \"@type\":\"xdmAsset\",\n               \"xdmAsset:asset_name\":\"healthcheck.png\",\n               \"xdmAsset:path\":\"/content/dam/healthcheck.png\",\n               \"xdmAsset:format\":\"image/png\"\n            },\n            \"xdmEventEnvelope:objectType\":\"xdmAsset\"\n         }\n      }\n   ],\n   \"_page\": {\n      \"last\": \"moose:e7ba778b-dace-4994-96e7-da80e7125233:2159b72c-e284-4899-b572-08da250e3614\",\n      \"count\": 2\n   }\n}\n`}</code></pre>\n    <p><em parentName=\"p\">{`Notice the structure of the JSON response returned by the Journaling API, and that the unique position of every event in the journal is mentioned alongside the event's data.`}</em></p>\n    <p><em parentName=\"p\">{`Also, for your benefit, all the examples in the journaling documentation are in continuation of each other.`}</em></p>\n    <h3 {...{\n      \"id\": \"fetching-the-next-batch-of-newer-events-from-the-journal\"\n    }}>{`Fetching the next batch of \"newer\" events from the journal`}</h3>\n    <p>{`Once your application has fetched a batch of events from the journal, it can fetch the next batch of \"newer\" events by supplying the `}<inlineCode parentName=\"p\">{`position`}</inlineCode>{` of the `}<inlineCode parentName=\"p\">{`last`}</inlineCode>{` event in the current batch. The `}<inlineCode parentName=\"p\">{`position`}</inlineCode>{` of the `}<inlineCode parentName=\"p\">{`last`}</inlineCode>{` event needs to be supplied back in the query parameter `}<inlineCode parentName=\"p\">{`since`}</inlineCode>{`. The API call can then be read semantically as: `}<strong parentName=\"p\"><inlineCode parentName=\"strong\">{`GET`}</inlineCode>{` a batch of events `}<inlineCode parentName=\"strong\">{`since`}</inlineCode>{` the given `}<inlineCode parentName=\"strong\">{`position`}</inlineCode>{` in the journal.`}</strong></p>\n    <p>{`Instead of constructing the URL to the next batch of \"newer\" events it is `}<strong parentName=\"p\">{`strongly recommended`}</strong>{` that you utilize the link provided in the response headers. Every successful response from the journaling API contains a `}<inlineCode parentName=\"p\">{`Link`}</inlineCode>{` response header with the relation type `}<inlineCode parentName=\"p\">{`rel=next`}</inlineCode>{`. The URL in the `}<inlineCode parentName=\"p\">{`next`}</inlineCode>{` link is pre-populated with the `}<inlineCode parentName=\"p\">{`since`}</inlineCode>{` query parameter to fetch the next batch of \"newer\" events.`}</p>\n    <p>{`For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=moose:e7ba778b-dace-4994-96e7-da80e7125233:2159b72c-e284-4899-b572-08da250e3614 \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`HTTP/1.1 200 OK\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=rabbit:f9645ec8-34f2-4188-bf6e-cea4b2784fda:7dd9e3c4-0d3f-42d5-abb4-1776e209b080>; rel=\"next\"\n\n{\n   \"events\":[\n      {\n         \"position\":\"rabbit:f9645ec8-34f2-4188-bf6e-cea4b2784fda:7dd9e3c4-0d3f-42d5-abb4-1776e209b080\",\n         \"event\":{\n            \"@id\":\"urn:oeid:aem:f6851819-5fb7-4232-ad25-f523ae44186c\",\n            \"@type\":\"xdmCreated\",\n            \"activitystreams:published\":\"2018-03-01T17:54:14-08\",\n            \"activitystreams:to\":{\n               \"@type\":\"xdmImsOrg\",\n               \"xdmImsOrg:id\":\"01DC1FC45956A5810A494138@AdobeOrg\"\n            },\n            \"activitystreams:generator\":{\n               \"@type\":\"xdmContentRepository\",\n               \"xdmContentRepository:root\":\"http://localhost-roberto-aem63:4502\"\n            },\n            \"activitystreams:actor\":{\n               \"@id\":\"healthcheck-user\",\n               \"@type\":\"xdmAemUser\"\n            },\n            \"activitystreams:object\":{\n               \"@type\":\"xdmAsset\",\n               \"xdmAsset:asset_name\":\"healthcheck.png\",\n               \"xdmAsset:path\":\"/content/dam/healthcheck.png\",\n               \"xdmAsset:format\":\"image/png\"\n            },\n            \"xdmEventEnvelope:objectType\":\"xdmAsset\"\n         }\n      }\n   ],\n   \"_page\": {\n      \"last\": \"rabbit:f9645ec8-34f2-4188-bf6e-cea4b2784fda:7dd9e3c4-0d3f-42d5-abb4-1776e209b080\",\n      \"count\": 1\n   }\n}\n`}</code></pre>\n    <p><em parentName=\"p\">{`Notice the link header with the URL to the next batch of events. The query parameter `}<inlineCode parentName=\"em\">{`since`}</inlineCode>{` in the URL has been automatically populated with the position of the `}<inlineCode parentName=\"em\">{`last`}</inlineCode>{` event in the batch.`}</em></p>\n    <h3 {...{\n      \"id\": \"fetching-events-from-the-end-of-the-journal\"\n    }}>{`Fetching events from the end of the journal`}</h3>\n    <p>{`By continuously iterating through the journal and consuming \"newer\" events, eventually your application will reach the \"end\" of the journal. The \"end\" of the journal corresponds to that position of the journal, where there are no \"newer\" events `}<em parentName=\"p\">{`yet`}</em>{`. Hence, if you try to fetch events \"newer\" than the \"end\" position, no events will be returned - just a `}<inlineCode parentName=\"p\">{`204 No Content`}</inlineCode>{` response.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=rabbit:f9645ec8-34f2-4188-bf6e-cea4b2784fda:7dd9e3c4-0d3f-42d5-abb4-1776e209b080 \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`HTTP/1.1 204 No Content\nretry-after: 10\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=rabbit:f9645ec8-34f2-4188-bf6e-cea4b2784fda:7dd9e3c4-0d3f-42d5-abb4-1776e209b080>; rel=\"next\"\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb/validate?since=rabbit:f9645ec8-34f2-4188-bf6e-cea4b2784fda:7dd9e3c4-0d3f-42d5-abb4-1776e209b080>; rel=\"validate\"\n`}</code></pre>\n    <p>{`However, after some time, depending on the frequency of events in your event registration, \"newer\" events will be added in near real-time to the end of the journal. These events can then be fetched by calling the same URL that earlier returned a `}<inlineCode parentName=\"p\">{`204 No Content`}</inlineCode>{` response, but this time it will return a `}<inlineCode parentName=\"p\">{`200 OK`}</inlineCode>{` response with a list of events in the response body.`}</p>\n    <p>{`For your benefit whenever you're fetching events `}<inlineCode parentName=\"p\">{`since`}</inlineCode>{` the \"end\" position in the journal, the `}<inlineCode parentName=\"p\">{`next`}</inlineCode>{` link in the `}<inlineCode parentName=\"p\">{`204 No Content`}</inlineCode>{` will be the same as the current request URI. Hence, you can always rely on the `}<inlineCode parentName=\"p\">{`next`}</inlineCode>{` link to iterate through the journal. And whenever you receive a `}<inlineCode parentName=\"p\">{`204 No Content`}</inlineCode>{` response you should back off by the number of seconds specified in the `}<inlineCode parentName=\"p\">{`retry-after`}</inlineCode>{` response header before resuming to pull events from the `}<inlineCode parentName=\"p\">{`next`}</inlineCode>{` link.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=rabbit:f9645ec8-34f2-4188-bf6e-cea4b2784fda:7dd9e3c4-0d3f-42d5-abb4-1776e209b080 \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`HTTP/1.1 200 OK\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb>; rel=\"next\"\n\n{\n   \"events\":[\n      {\n         \"position\":\"penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb\",\n         \"event\":{\n            \"@id\":\"urn:oeid:aem:5492d8d4-6fca-4d6c-a788-043ec4bf32af\",\n            \"@type\":\"xdmCreated\",\n            \"activitystreams:published\":\"2018-03-01T19:33:11-08\",\n            \"activitystreams:to\":{\n               \"@type\":\"xdmImsOrg\",\n               \"xdmImsOrg:id\":\"01DC1FC45956A5810A494138@AdobeOrg\"\n            },\n            \"activitystreams:generator\":{\n               \"@type\":\"xdmContentRepository\",\n               \"xdmContentRepository:root\":\"http://localhost-roberto-aem63:4502\"\n            },\n            \"activitystreams:actor\":{\n               \"@id\":\"healthcheck-user\",\n               \"@type\":\"xdmAemUser\"\n            },\n            \"activitystreams:object\":{\n               \"@type\":\"xdmAsset\",\n               \"xdmAsset:asset_name\":\"healthcheck.png\",\n               \"xdmAsset:path\":\"/content/dam/healthcheck.png\",\n               \"xdmAsset:format\":\"image/png\"\n            },\n            \"xdmEventEnvelope:objectType\":\"xdmAsset\"\n         }\n      }\n   ],\n   \"_page\": {\n      \"last\": \"penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb\",\n      \"count\": 1\n   }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"controlling-the-response\"\n    }}>{`Controlling the response`}</h2>\n    <h3 {...{\n      \"id\": \"limiting-the-size-of-the-batch\"\n    }}>{`Limiting the size of the batch`}</h3>\n    <p>{`When events are created at a high frequency, Journal persists groups of events in its storage units;\nwhen events are created at a lower rate, these storage units will contain only one event.`}</p>\n    <p>{`Hence, depending on the traffic of the events associated with your registration,\nthe number of events returned in a single response batch varies:\na batch of events contains at least one event (if you are not already at the end of the journal),\nbut there is no pre-defined upper limit.`}</p>\n    <p>{`In case you wish to set an upper bound, you can supply the `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` query parameter with the maximum number\nof events that may be returned by the API.`}</p>\n    <p>{`Once a `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` query parameter is supplied, the value of the parameter is retained in the `}<inlineCode parentName=\"p\">{`next`}</inlineCode>{` link as well. Hence, you can continue using the `}<inlineCode parentName=\"p\">{`next`}</inlineCode>{` link as-is, without needing to construct it. The `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` query parameter can also be combined with any other query parameter, just make sure that you pass a positive integer as the value.`}</p>\n    <p>{`For example, here is the same request as before but with the number of events returned limited to just one:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?limit=1 \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`HTTP/1.1 200 OK\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=camel:5aeb25cc-1b15-4f26-a082-9c213005dba8:ff244403-ca7c-4993-bbda-3c8915ce0b32&limit=1>; rel=\"next\"\n\n{\n   \"events\":[\n      {\n         \"position\":\"camel:5aeb25cc-1b15-4f26-a082-9c213005dba8:ff244403-ca7c-4993-bbda-3c8915ce0b32\",\n         \"event\":{\n            \"@id\":\"urn:oeid:aem:199e85da-dd54-4966-95ba-13cf544964dc\",\n            \"@type\":\"xdmCreated\",\n            \"activitystreams:published\":\"2018-03-06T15:19:03-08\",\n            \"activitystreams:to\":{\n               \"@type\":\"xdmImsOrg\",\n               \"xdmImsOrg:id\":\"01DC1FC45956A5810A494138@AdobeOrg\"\n            },\n            \"activitystreams:generator\":{\n               \"@type\":\"xdmContentRepository\",\n               \"xdmContentRepository:root\":\"http://localhost-roberto-aem63:4502\"\n            },\n            \"activitystreams:actor\":{\n               \"@id\":\"healthcheck-user\",\n               \"@type\":\"xdmAemUser\"\n            },\n            \"activitystreams:object\":{\n               \"@type\":\"xdmAsset\",\n               \"xdmAsset:asset_name\":\"healthcheck.png\",\n               \"xdmAsset:path\":\"/content/dam/healthcheck.png\",\n               \"xdmAsset:format\":\"image/png\"\n            },\n            \"xdmEventEnvelope:objectType\":\"xdmAsset\"\n         }\n      }\n   ],\n   \"_page\": {\n      \"last\": \"camel:5aeb25cc-1b15-4f26-a082-9c213005dba8:ff244403-ca7c-4993-bbda-3c8915ce0b32\",\n      \"count\": 1\n   }\n}\n`}</code></pre>\n    <p>{`NOTE: The `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` query parameter DOES NOT guarantee that the number of events returned will always be equal to the value supplied.\nThis is true even if there are more events to be consumed in the journal.\nThe `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` query parameter only serves as a way to specify an upper bound on the count of events.`}</p>\n    <p>{`For example, our journal above has at least 4 events that we know of, however, even when the `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` parameter is supplied with the value `}<inlineCode parentName=\"p\">{`3`}</inlineCode>{`, we do not get that many events in the respsonse.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?limit=3 \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`HTTP/1.1 200 OK\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=moose:e7ba778b-dace-4994-96e7-da80e7125233:2159b72c-e284-4899-b572-08da250e3614&limit=3>; rel=\"next\"\n\n{\n   \"events\":[\n      {\n         \"position\":\"camel:5aeb25cc-1b15-4f26-a082-9c213005dba8:ff244403-ca7c-4993-bbda-3c8915ce0b32\",\n         \"event\":{\n            \"@id\":\"urn:oeid:aem:199e85da-dd54-4966-95ba-13cf544964dc\",\n            \"@type\":\"xdmCreated\",\n            \"activitystreams:published\":\"2018-03-06T15:19:03-08\",\n            \"activitystreams:to\":{\n               \"@type\":\"xdmImsOrg\",\n               \"xdmImsOrg:id\":\"01DC1FC45956A5810A494138@AdobeOrg\"\n            },\n            \"activitystreams:generator\":{\n               \"@type\":\"xdmContentRepository\",\n               \"xdmContentRepository:root\":\"http://localhost-roberto-aem63:4502\"\n            },\n            \"activitystreams:actor\":{\n               \"@id\":\"healthcheck-user\",\n               \"@type\":\"xdmAemUser\"\n            },\n            \"activitystreams:object\":{\n               \"@type\":\"xdmAsset\",\n               \"xdmAsset:asset_name\":\"healthcheck.png\",\n               \"xdmAsset:path\":\"/content/dam/healthcheck.png\",\n               \"xdmAsset:format\":\"image/png\"\n            },\n            \"xdmEventEnvelope:objectType\":\"xdmAsset\"\n         }\n      },\n      {\n         \"position\":\"moose:e7ba778b-dace-4994-96e7-da80e7125233:2159b72c-e284-4899-b572-08da250e3614\",\n         \"event\":{\n            \"@id\":\"urn:oeid:aem:61930ae6-ff2a-48fb-881d-078e862c3811\",\n            \"@type\":\"xdmCreated\",\n            \"activitystreams:published\":\"2018-03-06T15:19:59-08\",\n            \"activitystreams:to\":{\n               \"@type\":\"xdmImsOrg\",\n               \"xdmImsOrg:id\":\"01DC1FC45956A5810A494138@AdobeOrg\"\n            },\n            \"activitystreams:generator\":{\n               \"@type\":\"xdmContentRepository\",\n               \"xdmContentRepository:root\":\"http://localhost-roberto-aem63:4502\"\n            },\n            \"activitystreams:actor\":{\n               \"@id\":\"healthcheck-user\",\n               \"@type\":\"xdmAemUser\"\n            },\n            \"activitystreams:object\":{\n               \"@type\":\"xdmAsset\",\n               \"xdmAsset:asset_name\":\"healthcheck.png\",\n               \"xdmAsset:path\":\"/content/dam/healthcheck.png\",\n               \"xdmAsset:format\":\"image/png\"\n            },\n            \"xdmEventEnvelope:objectType\":\"xdmAsset\"\n         }\n      }\n   ],\n   \"_page\": {\n      \"last\": \"moose:e7ba778b-dace-4994-96e7-da80e7125233:2159b72c-e284-4899-b572-08da250e3614\",\n      \"count\": 2\n   }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"consuming-the-most-recent-events\"\n    }}>{`Consuming the most recent events`}</h3>\n    <p>{`The Journaling endpoint URL when supplied with no query parameters returns the oldest entries in ledger, however, sometimes a client application is not interested in consuming older events. In such a case, the client application can jump straight to the \"end\" of the journal and start consuming events that are written to the journal after the request was made.`}</p>\n    <p>{`This can be done by specifying the query parameter `}<inlineCode parentName=\"p\">{`latest=true`}</inlineCode>{` on the first API call. For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?latest=true \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`HTTP/1.1 204 No Content\nretry-after: 10\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb>; rel=\"next\"\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb/validate?since=penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb>; rel=\"validate\"\n`}</code></pre>\n    <p>{`In most cases, there will not be any events to consume yet and the response will be a `}<inlineCode parentName=\"p\">{`204 No Content`}</inlineCode>{` response. In an extremely rare case, there might actually be events that were written in near-real time to the journal after the request was made and in such a case they will be able returned with a `}<inlineCode parentName=\"p\">{`200 OK`}</inlineCode>{` response with the same response body structure as above.`}</p>\n    <p>{`NOTE: the `}<inlineCode parentName=\"p\">{`latest=true`}</inlineCode>{` query parameter is just a way to jump to the \"end\" of the journal. The client applications should use the `}<inlineCode parentName=\"p\">{`next`}</inlineCode>{` links as usual to iterate over the journal from that position onward. In case the client application continues to make requests with `}<inlineCode parentName=\"p\">{`latest=true`}</inlineCode>{`, it is very likely that they will not receive any events - just because doing that is semantically equivalent of asking for \"events from now onward\". And the definition of \"now\" changes with every request that is made.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  /events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`HTTP/1.1 204 No Content\nretry-after: 10\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb>; rel=\"next\"\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb/validate?since=penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb>; rel=\"validate\"\n`}</code></pre>\n    <p>{`Note: We picked up the `}<inlineCode parentName=\"p\">{`next`}</inlineCode>{` link and made a `}<inlineCode parentName=\"p\">{`GET`}</inlineCode>{` request to the link instead of using the `}<inlineCode parentName=\"p\">{`latest=true`}</inlineCode>{` query parameter again. Once an event is actually available, the same link would give a `}<inlineCode parentName=\"p\">{`200 OK`}</inlineCode>{` response with the event.`}</p>\n    <p>{`Also note that the `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` query parameter can be combined with the `}<inlineCode parentName=\"p\">{`latest`}</inlineCode>{` query parameter as well. Even though the `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` query parameter might not be needed for the first request but it is helpful because subsequent `}<inlineCode parentName=\"p\">{`next`}</inlineCode>{` links will then come with the `}<inlineCode parentName=\"p\">{`limit`}</inlineCode>{` parameter already populated.`}</p>\n    <h2 {...{\n      \"id\": \"event-expiry\"\n    }}>{`Event expiry`}</h2>\n    <p>{`A journal will retain the events for up to 7 days of them being written. In the running analogy of a ledger, newer entries are added to the \"end\" whereas entries older than 7 days are removed from the \"beginning\" of the ledger.`}</p>\n    <h3 {...{\n      \"id\": \"oldest-available-events\"\n    }}>{`Oldest available events`}</h3>\n    <p>{`The journaling endpoint URL when called without any query parameters tries to fetch the oldest events in the journal. However, because older events expire after 7 days, the best the API can do is to return the `}<em parentName=\"p\">{`oldest available events`}</em>{` in the journal.`}</p>\n    <p>{`Hence, over time the response of the Journaling API when called without any query parameters will change. This is only because as older events expire, the starting position of the journal begins pointing to a new set of oldest available events.`}</p>\n    <p>{`For example, let's assume that the first three events in our journal got older than 7 days and have now expired. If we now try to fetch the oldest available events from the journal:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`HTTP/1.1 200 OK\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb>; rel=\"next\"\n\n{\n   \"events\":[\n      {\n         \"position\":\"penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb\",\n         \"event\":{\n            \"@id\":\"urn:oeid:aem:5492d8d4-6fca-4d6c-a788-043ec4bf32af\",\n            \"@type\":\"xdmCreated\",\n            \"activitystreams:published\":\"2018-03-01T19:33:11-08\",\n            \"activitystreams:to\":{\n               \"@type\":\"xdmImsOrg\",\n               \"xdmImsOrg:id\":\"01DC1FC45956A5810A494138@AdobeOrg\"\n            },\n            \"activitystreams:generator\":{\n               \"@type\":\"xdmContentRepository\",\n               \"xdmContentRepository:root\":\"http://localhost-roberto-aem63:4502\"\n            },\n            \"activitystreams:actor\":{\n               \"@id\":\"healthcheck-user\",\n               \"@type\":\"xdmAemUser\"\n            },\n            \"activitystreams:object\":{\n               \"@type\":\"xdmAsset\",\n               \"xdmAsset:asset_name\":\"healthcheck.png\",\n               \"xdmAsset:path\":\"/content/dam/healthcheck.png\",\n               \"xdmAsset:format\":\"image/png\"\n            },\n            \"xdmEventEnvelope:objectType\":\"xdmAsset\"\n         }\n      }\n   ],\n   \"_page\": {\n      \"last\": \"penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb\",\n      \"count\": 1\n   }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"fetching-expired-events\"\n    }}>{`Fetching expired events`}</h3>\n    <p>{`Once an event expires, it cannot be fetched again. This means that a request that previously returned events with a `}<inlineCode parentName=\"p\">{`200 OK`}</inlineCode>{` response, after 7 days will stop returning those events, and will instead return a `}<inlineCode parentName=\"p\">{`410 Gone`}</inlineCode>{` response.`}</p>\n    <p>{`For example, now that the first three events in our journal have expired, if we again try to make the second API request in the documentation above, this is the response we will get:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=moose:e7ba778b-dace-4994-96e7-da80e7125233:2159b72c-e284-4899-b572-08da250e3614 \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`HTTP/1.1 410 Gone\n\nEvents at position moose:e7ba778b-dace-4994-96e7-da80e7125233:2159b72c-e284-4899-b572-08da250e3614 have expired.\n`}</code></pre>\n    <p>{`Once the events at a certain position have expired, that position in the journal can no longer be used to fetch more events. In such a scenario, your application will need to reset its position in the journal. To reset the position you could chose to consume events from the `}<inlineCode parentName=\"p\">{`oldest available position`}</inlineCode>{` or the `}<inlineCode parentName=\"p\">{`latest`}</inlineCode>{` position depending on your use case.`}</p>\n    <h3 {...{\n      \"id\": \"no-events-in-journal\"\n    }}>{`No Events in Journal`}</h3>\n    <p>{`If the Journaling API, when called without any query parameters, responds with a `}<inlineCode parentName=\"p\">{`204 No Content`}</inlineCode>{` response it signifies that there aren't actually any events in the journal. Either there may have been events in the past that have now expired, or, there never were any events in the journal.`}</p>\n    <p>{`For example, once all events in our journal expire:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`curl -X GET \\\\\n  https://events.adobe.io/events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb \\\\\n  -H \"x-ims-org-id: 4CC7D9704674CFB2138A2C54@AdobeOrg\" \\\\\n  -H \"Authorization: Bearer $USER_TOKEN\" \\\\\n  -H \"x-api-key: $API_KEY\"\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-http\"\n      }}>{`HTTP/1.1 204 No Content\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb?since=penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb>; rel=\"next\"\nLink: </events/organizations/23294/integrations/54108/f89067f2-0d50-4bb2-bf78-209d0eacb6eb/validate?since=penguin:41322b44-c2e9-4b44-8354-ba2173064d24:752f6e67-d7e4-48d3-9f51-452936268fbb>; rel=\"validate\"\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","props","_objectWithoutPropertiesLoose","_excluded","mdx","_extends","mdxType","parentName","isMDXComponent"],"sourceRoot":""}