(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[9338],{81426:function(e,n,a){"use strict";a.r(n),a.d(n,{_frontmatter:function(){return l},default:function(){return s}});var t=a(22122),o=a(19756),i=(a(15007),a(64983)),r=a(99536),d=["components"],l={},m={_frontmatter:l},p=r.Z;function s(e){var n=e.components,a=(0,o.Z)(e,d);return(0,i.mdx)(p,(0,t.Z)({},m,a,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"adobe-io-events-registration-api"},"Adobe I/O Events Registration API"),(0,i.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Create a project in the ",(0,i.mdx)("a",{parentName:"li",href:"/adobe-io-events/developer-console/docs/guides/projects/projects-empty/"},"Adobe Developer Console")),(0,i.mdx)("li",{parentName:"ul"},"Add the ",(0,i.mdx)("inlineCode",{parentName:"li"},"I/O Management API")," in your Adobe Developer Console project ",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Click on ",(0,i.mdx)("inlineCode",{parentName:"li"},"Add to Project")," > ",(0,i.mdx)("inlineCode",{parentName:"li"},"API")),(0,i.mdx)("li",{parentName:"ul"},"Select ",(0,i.mdx)("inlineCode",{parentName:"li"},"I/O Management API")),(0,i.mdx)("li",{parentName:"ul"},"Create a new service account (JWT) credential screen, "),(0,i.mdx)("li",{parentName:"ul"},"Save"),(0,i.mdx)("li",{parentName:"ul"},"Bookmark your workspace, as you might need to come back to it more than once, to fine tune or troubleshoot your configurations."),(0,i.mdx)("li",{parentName:"ul"},"Once done, note you have a JWT credentials defined"))),(0,i.mdx)("li",{parentName:"ul"},"Note all your org, api-key and other contextual Ids",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"Browse to your Adobe Developer Console",(0,i.mdx)("inlineCode",{parentName:"li"},">"),"Project overview`"),(0,i.mdx)("li",{parentName:"ul"},"Click on ",(0,i.mdx)("inlineCode",{parentName:"li"},"Download"),", open the downloaded ",(0,i.mdx)("inlineCode",{parentName:"li"},"json")," file with your favorite editor, in there you'll find:",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"your consumer Org Id (also called ",(0,i.mdx)("inlineCode",{parentName:"li"},"consumer id"),") (at ",(0,i.mdx)("inlineCode",{parentName:"li"},"project.org.id"),")"),(0,i.mdx)("li",{parentName:"ul"},"your IMS Org Id (at ",(0,i.mdx)("inlineCode",{parentName:"li"},"project.org.ims_org_id"),")"),(0,i.mdx)("li",{parentName:"ul"},"your credential Id (also called ",(0,i.mdx)("inlineCode",{parentName:"li"},"application id"),") (at ",(0,i.mdx)("inlineCode",{parentName:"li"},"project.workspace.details.credentials[0].id"),", note that ",(0,i.mdx)("inlineCode",{parentName:"li"},"credentials")," is an array,\nif you have more than one, pick the one where you defined your jwt"),(0,i.mdx)("li",{parentName:"ul"},"your client_id (also called ",(0,i.mdx)("inlineCode",{parentName:"li"},"x-api-key"),") (at ",(0,i.mdx)("inlineCode",{parentName:"li"},"project.workspace.details.credentials[0].jwt.client_id"),"                "))))),(0,i.mdx)("li",{parentName:"ul"},"Define your webhook registration you will need :",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},'a webhook url (accessible from the internet, reachable over HTTPS and that correctly respond to a "challenge" request) see ',(0,i.mdx)("a",{parentName:"li",href:"/adobe-io-events/guides/"},"Webhooks")),(0,i.mdx)("li",{parentName:"ul"},"a name (a user friendly name, used for display in the Adobe Developer Console)"),(0,i.mdx)("li",{parentName:"ul"},"an array of events of interests, that are defined with 2 ids",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"a ",(0,i.mdx)("inlineCode",{parentName:"li"},"provider_id"),": defining one of the events source system (the events provider) your organization is entitled to,"),(0,i.mdx)("li",{parentName:"ul"},"a ",(0,i.mdx)("inlineCode",{parentName:"li"},"event_code"),": defining a type of the events the above system (the events provider) is emitting.")))))),(0,i.mdx)("ol",{start:5},(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("a",{parentName:"li",href:"/adobe-io-events/developer-console/docs/guides/credentials/"},"Generate a JWT token"))),(0,i.mdx)("h2",{id:"test-drive"},"Test Drive"),(0,i.mdx)("p",null,"Once the above are defined (and stuffed as environment variables),\nyou are ready to use our ",(0,i.mdx)("a",{parentName:"p",href:"/adobe-io-events/api/#operation/createRegistrationCli"},"registration API"),"."),(0,i.mdx)("p",null,"To help you further and document the typical ",(0,i.mdx)("inlineCode",{parentName:"p"},"Webhook Registration Payload"),",\nhere is a sample ",(0,i.mdx)("inlineCode",{parentName:"p"},"POST")," ",(0,i.mdx)("inlineCode",{parentName:"p"},"curl")," query that will create a new Webhook Registration against ",(0,i.mdx)("inlineCode",{parentName:"p"},"https://your.webhook"),"."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},'curl -v --request POST \\\n      --url https://api.adobe.io/events/organizations/${consumer_id}/integrations/${application_id}/registrations \\\n      --header "x-api-key: $api_key" \\\n      --header "x-ims-org-id: $ims_org_id" \\\n      --header "Authorization: Bearer $jwt_token" \\\n      --header \'content-type: application/json\' \\\n      --header \'Accept: application/json\' \\\n      --data \'{\n                "client_id": "\'"${api_key}"\'",\n                "webhook_url": "https://your.webhook",\n                "name": "a user friendly name",\n                "events_of_interest": [\n                    { "provider_id": "some_provider",\n                      "event_code": "some_event_code"\n               }]}\'\n')),(0,i.mdx)("p",null,"Once done/",(0,i.mdx)("inlineCode",{parentName:"p"},"200")," this webhook will be POST-ed all ",(0,i.mdx)("inlineCode",{parentName:"p"},"some_event_code")," events provided by ",(0,i.mdx)("inlineCode",{parentName:"p"},"some_provider"),".\nIf you wonder how to fetch the valid provider Ids and event codes, look at our ",(0,i.mdx)("a",{parentName:"p",href:"provider_api.md"},"Provider API")))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-api-registration-api-md-2b3e3511d5950a4ea83e.js.map