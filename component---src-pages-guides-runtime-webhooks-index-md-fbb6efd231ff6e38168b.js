"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[5713],{37721:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return c},default:function(){return l}});var i,n=a(87462),o=a(63366),s=(a(15007),a(64983)),r=a(91515),d=["components"],c={},p=(i="InlineAlert",function(e){return console.warn("Component "+i+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.mdx)("div",e)}),b={_frontmatter:c},u=r.Z;function l(e){var t=e.components,a=(0,o.Z)(e,d);return(0,s.mdx)(u,(0,n.Z)({},b,a,{components:t,mdxType:"MDXLayout"}),(0,s.mdx)("h1",{id:"runtime-actions-as-webhook"},"Runtime Actions as Webhook"),(0,s.mdx)("p",null,"The integration between Adobe I/O Runtime and I/O Events lets you create Runtime actions to be set up as webhook endpoints on the ",(0,s.mdx)("inlineCode",{parentName:"p"},"Developer Console")," for receiving events, so that every time an event fires, your Runtime action is executed. Set up your runtime action as ",(0,s.mdx)("strong",{parentName:"p"},"webhook")," only if you have short-running action (that responds within 10 sec)."),(0,s.mdx)("p",null,"For long-running (async) actions and guaranteed event handling you should consider using the ",(0,s.mdx)("a",{parentName:"p",href:"/adobe-io-events/app-builder/docs/resources/journaling-events/"},"journaling approach")," for consuming events."),(0,s.mdx)("h2",{id:"setting-up-webhook-integration-with-runtime-action"},"Setting up Webhook Integration with Runtime Action"),(0,s.mdx)("p",null,"The Runtime cli will let you create a runtime action and hook it up with an integration via Adobe Developer Console. Read ",(0,s.mdx)("a",{parentName:"p",href:"/adobe-io-events/runtime/docs/guides/getting-started/setup/"},"here")," to setup your cli with Runtime plugin which is required as pre-requisite."),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"Go to Developer Console and start creating an event registration"),(0,s.mdx)("li",{parentName:"ul"},"Add ",(0,s.mdx)("a",{parentName:"li",href:"/adobe-io-events/developer-console/docs/guides/services/#enable-runtime"},"Runtime")," to your project, this will create the required auth and runtime namespace for you."),(0,s.mdx)("li",{parentName:"ul"},"Go to ",(0,s.mdx)("inlineCode",{parentName:"li"},"aio-cli")," and create and deploy your user-action in your namespace."),(0,s.mdx)("li",{parentName:"ul"},"Come back to Developer Console and you will see the deployed runtime action in your namespace under the ",(0,s.mdx)("inlineCode",{parentName:"li"},"User Defined Actions")," section. Refresh the page if you don't see the action."),(0,s.mdx)("li",{parentName:"ul"},"Now set up an event registration using the runtime action you just deployed. You would need to select the ",(0,s.mdx)("inlineCode",{parentName:"li"},"Runtime Action")," option in your ",(0,s.mdx)("inlineCode",{parentName:"li"},"Configure event registration")," page. Choose your runtime action from the dropdown and click ",(0,s.mdx)("inlineCode",{parentName:"li"},"Save configured events"),"."),(0,s.mdx)("li",{parentName:"ul"},"This will create an event registration with an event handler webhook pointing to your runtime action.")),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Things to Note")),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"You must create a ",(0,s.mdx)("inlineCode",{parentName:"li"},"non-web")," action for that to be used in the ",(0,s.mdx)("inlineCode",{parentName:"li"},"Runtime Action")," option. For web actions you should use the ",(0,s.mdx)("inlineCode",{parentName:"li"},"Webhook")," option on the Developer Console. You should secure your web action by implementing the ",(0,s.mdx)("a",{parentName:"li",href:"/adobe-io-events/events/docs/guides/#security-considerations"},"digital signature verification")," method recommended by us."),(0,s.mdx)("li",{parentName:"ul"},"For integrating action generated via the ",(0,s.mdx)("a",{parentName:"li",href:"/adobe-io-events/app-builder/"},"app builder")," as runtime action event consumer, you must set the ",(0,s.mdx)("inlineCode",{parentName:"li"},"require-adobe-auth")," field generated by-default in your manifest.yml file to ",(0,s.mdx)("inlineCode",{parentName:"li"},"false")," and also make this action non-web (",(0,s.mdx)("inlineCode",{parentName:"li"},"web:no"),"). You will get security OOTB for your action as defined below ",(0,s.mdx)("a",{parentName:"li",href:"#built-in-signature-verification"},"here"),".")),(0,s.mdx)("h2",{id:"benefits-of-using-runtime-action-as-webhook"},"Benefits of using Runtime Action as Webhook"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"#built-in-signature-verification"},"Built In Signature Verification")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("a",{parentName:"li",href:"#tracing-actions-with-activation-ids"},"Tracing Actions with Activation Ids"))),(0,s.mdx)("h3",{id:"built-in-signature-verification"},"Built In Signature Verification"),(0,s.mdx)("p",null,"With integration between I/O Events and Adobe I/O Runtime, you don't need to worry about security as your runtime actions configured as webhooks are secured with an out-of-the-box signature verification implementation. So, basically whatever runtime action you use to create an event registration, the handler webhook created due to that will place a signature validator action along with your action as in a ",(0,s.mdx)("a",{parentName:"p",href:"/adobe-io-events/runtime/docs/guides/reference/sequences_compositions/"},"sequence"),". I/O Events signs the event payload using digital signatures generated using its private keys and passes the signatures as well as its public keys as request headers while invoking your webhook. Your business logic runtime action will only be invoked once the validator action successfully verifies any one of the digital signatures using the public keys. You can read more about the digital signatures based authentication mechanism ",(0,s.mdx)("a",{parentName:"p",href:"/adobe-io-events/src/pages/guides/index.md#security-considerations"},"here"),"."),(0,s.mdx)("h3",{id:"tracing-actions-with-activation-ids"},"Tracing Actions with Activation Ids"),(0,s.mdx)("p",null,(0,s.mdx)("a",{parentName:"p",href:"../support/tracing.md"},"Debug Tracing")," is a pretty important tool on Developer Console for users who want to be informed whether their runtime action invocation is successful or not or what it responds."),(0,s.mdx)("p",null,"After setting up a runtime action as webhook, upon its successful invocation, you can see custom response returned from your own runtime action in the ",(0,s.mdx)("inlineCode",{parentName:"p"},"Debug Tracing")," webhook response section as below."),(0,s.mdx)("p",null,(0,s.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,s.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"37.5%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,s.mdx)("picture",{parentName:"span"},"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/5530d/debug_tracing_webhook_response_new.webp 320w","/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/0c8fb/debug_tracing_webhook_response_new.webp 640w","/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/94b1e/debug_tracing_webhook_response_new.webp 1280w","/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/0b34d/debug_tracing_webhook_response_new.webp 1920w","/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/38072/debug_tracing_webhook_response_new.webp 2476w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/dd4a7/debug_tracing_webhook_response_new.png 320w","/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/0f09e/debug_tracing_webhook_response_new.png 640w","/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/bbbf7/debug_tracing_webhook_response_new.png 1280w","/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/ac7a9/debug_tracing_webhook_response_new.png 1920w","/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/1bc59/debug_tracing_webhook_response_new.png 2476w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,s.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/adobe-io-events/static/4e0afe81b5b7052e846bdaf386775b39/bbbf7/debug_tracing_webhook_response_new.png",alt:"Debug Tracing Webhook Response on Adobe Developer Console",title:"Debug Tracing Webhook Response on Adobe Developer Console",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,s.mdx)("p",null,"However, in case of any failed invocation to your webhook, you will get an error response body with an activation id for the same. This helps users to debug their actions as below"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("p",{parentName:"li"},"This activation id you can use in the ",(0,s.mdx)("inlineCode",{parentName:"p"},"aio cli")," to trace the actual error occurred in your invocation by doing ",(0,s.mdx)("inlineCode",{parentName:"p"},"aio rt activation logs <failed_activation_id>"))),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("p",{parentName:"li"},"You may now get activation ids for two types of failed activations -"),(0,s.mdx)("ul",{parentName:"li"},(0,s.mdx)("li",{parentName:"ul"},"Signature Validator Action"),(0,s.mdx)("li",{parentName:"ul"},"Your Runtime Action"))),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("p",{parentName:"li"},"In case of failure in the signature verification step, this is how you will get the error response and the failed activation id for the same."),(0,s.mdx)("p",{parentName:"li"},"  ",(0,s.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1258px"}},"\n      ",(0,s.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"53.125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,s.mdx)("picture",{parentName:"span"},"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/adobe-io-events/static/177a3fcd0dfad8718e5629ab812b4aa1/5530d/activation_id_for_failed_signature.webp 320w","/adobe-io-events/static/177a3fcd0dfad8718e5629ab812b4aa1/0c8fb/activation_id_for_failed_signature.webp 640w","/adobe-io-events/static/177a3fcd0dfad8718e5629ab812b4aa1/0fc3c/activation_id_for_failed_signature.webp 1258w"],sizes:"(max-width: 1258px) 100vw, 1258px",type:"image/webp"}),"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/adobe-io-events/static/177a3fcd0dfad8718e5629ab812b4aa1/dd4a7/activation_id_for_failed_signature.png 320w","/adobe-io-events/static/177a3fcd0dfad8718e5629ab812b4aa1/0f09e/activation_id_for_failed_signature.png 640w","/adobe-io-events/static/177a3fcd0dfad8718e5629ab812b4aa1/5745f/activation_id_for_failed_signature.png 1258w"],sizes:"(max-width: 1258px) 100vw, 1258px",type:"image/png"}),"\n          ",(0,s.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/adobe-io-events/static/177a3fcd0dfad8718e5629ab812b4aa1/5745f/activation_id_for_failed_signature.png",alt:"Activation Id for Failed Signature Verification",title:"Activation Id for Failed Signature Verification",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    "))),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("p",{parentName:"li"},"For failed invocation to your runtime action, you will get an error response with the failed activation id for the same like below"),(0,s.mdx)("p",{parentName:"li"},"  ",(0,s.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1262px"}},"\n      ",(0,s.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"53.125%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,s.mdx)("picture",{parentName:"span"},"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/adobe-io-events/static/eb53f4eba0625535cc7b9f3a60c3fc56/5530d/activation_id_for_failed_user_action.webp 320w","/adobe-io-events/static/eb53f4eba0625535cc7b9f3a60c3fc56/0c8fb/activation_id_for_failed_user_action.webp 640w","/adobe-io-events/static/eb53f4eba0625535cc7b9f3a60c3fc56/53908/activation_id_for_failed_user_action.webp 1262w"],sizes:"(max-width: 1262px) 100vw, 1262px",type:"image/webp"}),"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/adobe-io-events/static/eb53f4eba0625535cc7b9f3a60c3fc56/dd4a7/activation_id_for_failed_user_action.png 320w","/adobe-io-events/static/eb53f4eba0625535cc7b9f3a60c3fc56/0f09e/activation_id_for_failed_user_action.png 640w","/adobe-io-events/static/eb53f4eba0625535cc7b9f3a60c3fc56/f3b60/activation_id_for_failed_user_action.png 1262w"],sizes:"(max-width: 1262px) 100vw, 1262px",type:"image/png"}),"\n          ",(0,s.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/adobe-io-events/static/eb53f4eba0625535cc7b9f3a60c3fc56/f3b60/activation_id_for_failed_user_action.png",alt:"Activation Id for Failed User Action",title:"Activation Id for Failed User Action",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))),(0,s.mdx)(p,{slots:"text",mdxType:"InlineAlert"}),(0,s.mdx)("p",null,"Please note that the headers sent in the event registration request (highlighted in below) are ",(0,s.mdx)("strong",{parentName:"p"},"not")," available to the target user runtime action which was\nused to set up the runtime event registration. This is only available and used by the ",(0,s.mdx)("inlineCode",{parentName:"p"},"event handler webhook")," (web action)\nwhich fronts the user runtime action.\n",(0,s.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,s.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"62.5%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,s.mdx)("picture",{parentName:"span"},"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/5530d/runtime_webhook_request_headers_in_debug_tracing.webp 320w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/0c8fb/runtime_webhook_request_headers_in_debug_tracing.webp 640w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/94b1e/runtime_webhook_request_headers_in_debug_tracing.webp 1280w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/0b34d/runtime_webhook_request_headers_in_debug_tracing.webp 1920w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/d5269/runtime_webhook_request_headers_in_debug_tracing.webp 2560w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/34f4f/runtime_webhook_request_headers_in_debug_tracing.webp 2870w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,s.mdx)("source",{parentName:"picture",srcSet:["/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/dd4a7/runtime_webhook_request_headers_in_debug_tracing.png 320w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/0f09e/runtime_webhook_request_headers_in_debug_tracing.png 640w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/bbbf7/runtime_webhook_request_headers_in_debug_tracing.png 1280w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/ac7a9/runtime_webhook_request_headers_in_debug_tracing.png 1920w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/c7a69/runtime_webhook_request_headers_in_debug_tracing.png 2560w","/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/da3a4/runtime_webhook_request_headers_in_debug_tracing.png 2870w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,s.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/adobe-io-events/static/04989fbc9c1558b4c9ddbb3fcc44885f/bbbf7/runtime_webhook_request_headers_in_debug_tracing.png",alt:"Runtime Webhook Request Headers not available to user action",title:"Runtime Webhook Request Headers not available to user action",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-runtime-webhooks-index-md-fbb6efd231ff6e38168b.js.map