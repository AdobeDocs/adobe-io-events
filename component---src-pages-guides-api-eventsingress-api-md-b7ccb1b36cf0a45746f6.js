"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[9244],{10172:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return s},default:function(){return h}});var a,i=n(87462),o=n(63366),d=(n(15007),n(64983)),r=n(91515),l=["components"],s={},p=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",e)}),m={_frontmatter:s},u=r.Z;function h(e){var t=e.components,n=(0,o.Z)(e,l);return(0,d.mdx)(u,(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"events-publishing-api"},"Events Publishing API"),(0,d.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"Create a project and a workspace in the ",(0,d.mdx)("a",{parentName:"li",href:"/adobe-io-events/developer-console/docs/guides/projects/projects-empty/"},"Adobe Developer Console")),(0,d.mdx)("li",{parentName:"ul"},"Add the ",(0,d.mdx)("inlineCode",{parentName:"li"},"I/O Management API")," in this Adobe Developer Console workspace"),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"/adobe-io-events/developer-console/docs/guides/credentials/"},"Generate an OAuth Server-to-Server token")),(0,d.mdx)("li",{parentName:"ul"},"Using ",(0,d.mdx)("a",{parentName:"li",href:"provider_api.md"},"Adobe I/O Events Provider API"),(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},"create your own ",(0,d.mdx)("inlineCode",{parentName:"li"},"Custom Events Provider")),(0,d.mdx)("li",{parentName:"ul"},"create at least one ",(0,d.mdx)("inlineCode",{parentName:"li"},"Event Metadata")," associated with the above")))),(0,d.mdx)(p,{slots:"title, text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"Data Residency:"),(0,d.mdx)("p",null,"Please note that all custom events are stored in the ",(0,d.mdx)("strong",{parentName:"p"},"United States (US)")," region.  "),(0,d.mdx)("h2",{id:"throttling-policy"},"Throttling Policy"),(0,d.mdx)("p",null,"We do have a throttling policy in place, we accept up to 3,000 requests / 5 secs per api-key.\nYour throttled requests will receive a HTTP Status 429 (Too Many Requests) response\nwith a ",(0,d.mdx)("inlineCode",{parentName:"p"},"Retry-After")," header, following the ",(0,d.mdx)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc7231#section-7.1.3"},"RFC 7231")," HTTP standard."),(0,d.mdx)("h2",{id:"test-drive"},"Test Drive"),(0,d.mdx)("p",null,"Once its ",(0,d.mdx)("inlineCode",{parentName:"p"},"Event Metadata")," is persisted in Adobe I/O Events (see above prerequisites),\nyour ",(0,d.mdx)("inlineCode",{parentName:"p"},"Custom Events Provider")," can start publishing its\n",(0,d.mdx)("a",{parentName:"p",href:"https://cloudevents.io"},"CloudEvents")," to Adobe I/O Events publishing endpoint (",(0,d.mdx)("inlineCode",{parentName:"p"},"https://eventsingress.adobe.io"),")."),(0,d.mdx)("p",null,"Please follow ",(0,d.mdx)("a",{parentName:"p",href:"https://github.com/cloudevents/spec/blob/v1.0/spec.md"},"CloudEvents v1.0 specification"),",\nhere is a sample ",(0,d.mdx)("inlineCode",{parentName:"p"},"curl")," command:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-bash"},'curl -i --location --request POST  \\\n       --url https://eventsingress.adobe.io \\\n       --header "x-api-key: $api_key" \\\n       --header "Authorization: Bearer $oauth_s2s_token" \\\n       --header \'Content-Type: application/cloudevents+json\' \\\n       --header "x-event-phidata: $is_phidata" \\\n       --data \'{\n         "datacontenttype": "application/json",\n         "specversion": "1.0",\n         "source": "urn:uuid:\'"${provider_id}"\'",\n         "type": "\'"${event_code}"\'",\n         "id": "\'"${event_id}"\'",\n         "data": "your event json payload"\n         "customattribute" : "cloud events custom extension"\n       }\'\n')),(0,d.mdx)("p",null,"The environment variables used in this ",(0,d.mdx)("inlineCode",{parentName:"p"},"curl")," command are computed from the above prerequisites"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"api_key")," is the api-key associated with your Adobe Developer Console workspace"),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"oauth_s2s_token")," is an OAuth Server-to-Server token generated using the set up from the same workspace"),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"is_phidata")," is a boolean value indicating if the event contains PHI data, and is required for ",(0,d.mdx)("a",{parentName:"li",href:"#hipaa-compliance-support"},"HIPAA compliance")," (defaults to ",(0,d.mdx)("inlineCode",{parentName:"li"},"false")," if not provided)"),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"provider_id")," is your ",(0,d.mdx)("inlineCode",{parentName:"li"},"Custom Events Provider")," uuid generated by ",(0,d.mdx)("a",{parentName:"li",href:"../api/provider_api.md"},"Adobe I/O Events Provider API")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"event_code")," is the ",(0,d.mdx)("inlineCode",{parentName:"li"},"Custom Events Provider"),"'s ",(0,d.mdx)("inlineCode",{parentName:"li"},"Event Metadata"),"'s ",(0,d.mdx)("inlineCode",{parentName:"li"},"event_code")," as persisted using ",(0,d.mdx)("a",{parentName:"li",href:"../api/provider_api.md"},"Adobe I/O Events Provider API")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"event_id")," is any id of your choice (examples: UUID, event counter) guaranteeing that ",(0,d.mdx)("inlineCode",{parentName:"li"},"source + id")," is unique\nfor each distinct event see ",(0,d.mdx)("a",{parentName:"li",href:"https://github.com/cloudevents/spec/blob/v1.0/spec.md#id"},"CloudEvents spec")),(0,d.mdx)("li",{parentName:"ul"},"as for the value of ",(0,d.mdx)("inlineCode",{parentName:"li"},"data")," in the CloudEvents body payload, it can be any json payload."),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("inlineCode",{parentName:"li"},"customattribute")," (a.k.a cloud events extensions) are any attributes defined by you following the ",(0,d.mdx)("a",{parentName:"li",href:"https://github.com/cloudevents/spec/blob/v1.0/spec.md#attribute-naming-convention"},"CloudEvents attribute naming convention"))),(0,d.mdx)("p",null,"The API returns"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"HTTP Status 200 (OK) if the event has been processed correctly and there are active registrations for the event"),(0,d.mdx)("li",{parentName:"ul"},"HTTP Status 204 (No Content) if there are no registrations for the event"),(0,d.mdx)("li",{parentName:"ul"},"HTTP Status 429 (Too Many Requests) if your api-key is being throttled (see our ",(0,d.mdx)("a",{parentName:"li",href:"#throttling-policy"},"Throttling Policy"),")"),(0,d.mdx)("li",{parentName:"ul"},"as well as the other usual (4xx/5xx) error codes if there was an issue in processing the request",(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},"HTTP status 400 is returned if payload failed to deserialize due to being non-compliant as per CloudEvents spec")))),(0,d.mdx)("h2",{id:"hipaa-compliance-support"},"HIPAA Compliance Support"),(0,d.mdx)("p",null,"I/O Events is compliant with ",(0,d.mdx)("a",{parentName:"p",href:"https://www.hhs.gov/hipaa/for-professionals/privacy/index.html#:~:text=The%20HIPAA%20Privacy%20Rule%20establishes,care%20providers%20that%20conduct%20certain"},"HIPAA regulation"),".\nThe event producers are responsible to signal if the event contains PHI data by setting the optional ",(0,d.mdx)("inlineCode",{parentName:"p"},"x-event-phidata")," header to ",(0,d.mdx)("inlineCode",{parentName:"p"},"true")," in the request.\nWhen the header is present and set to ",(0,d.mdx)("inlineCode",{parentName:"p"},"true"),":"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"the resulting CloudEvents-formatted event which is produced will be enriched with a ",(0,d.mdx)("a",{parentName:"li",href:"https://github.com/cloudevents/spec/blob/main/cloudevents/primer.md#cloudevent-extension-attributes"},"CloudEvents extension"),", namely, a ",(0,d.mdx)("inlineCode",{parentName:"li"},"phidata")," node, set to ",(0,d.mdx)("inlineCode",{parentName:"li"},"true"),","),(0,d.mdx)("li",{parentName:"ul"},"with the above ",(0,d.mdx)("inlineCode",{parentName:"li"},"phidata")," extension receivers will be able to identify which events contain PHI data and handle them accordingly,"),(0,d.mdx)("li",{parentName:"ul"},"audit trace logs will be preserved for 1 year in a HIPAA-compliant storage,"),(0,d.mdx)("li",{parentName:"ul"},"the ",(0,d.mdx)("inlineCode",{parentName:"li"},"id")," field in the CloudEvents payload will be used as a ",(0,d.mdx)("inlineCode",{parentName:"li"},"trace-id")," for the above audit trace logs.")),(0,d.mdx)("p",null,"In the event of an audit, you will need to be able to provide evidences of how the patient data was handled."),(0,d.mdx)("h3",{id:"audit-log-storing-the-mapping-between-phi-data-to-ids"},"Audit log: storing the mapping between PHI data to ids"),(0,d.mdx)("p",null,"It is your responsibility to store the ",(0,d.mdx)("inlineCode",{parentName:"p"},"id")," in your own logs or storage solution for traceability.\nIf you are handling multiple end patients data (PHIs), you should also store what ",(0,d.mdx)("inlineCode",{parentName:"p"},"id")," you\nproduced corresponds to what patient data, to be able to provide information regarding that\npatient data in case of an audit specific to that patient."),(0,d.mdx)("p",null,"You can ask I/O Events support to retrieve the audit trace logs for a given set of ",(0,d.mdx)("inlineCode",{parentName:"p"},"ids")," you produced.\nYou can reach the support team through the ",(0,d.mdx)("a",{parentName:"p",href:"https://experienceleaguecommunities.adobe.com/t5/adobe-developer/ct-p/adobe-io"},"Adobe I/O Forums")," on Adobe Experience League."))}h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-api-eventsingress-api-md-b7ccb1b36cf0a45746f6.js.map