"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[7539],{75375:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return l},default:function(){return u}});var a=t(87462),o=t(63366),i=(t(15007),t(64983)),s=t(91515),m=["components"],l={},r={_frontmatter:l},d=s.Z;function u(e){var n=e.components,t=(0,o.Z)(e,m);return(0,i.mdx)(d,(0,a.Z)({},r,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"aem--adobe-io-events---advanced-configurations"},"AEM & Adobe IO Events - Advanced Configurations"),(0,i.mdx)("h2",{id:"custom-osgi-to-adobe-io-events-event-mapping-configurations"},"Custom OSGI to Adobe I/O Events event mapping configurations:"),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio-aem-events")," add-on module is providing a set of\n",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-lib-java/tree/main/aem/aio_aem_events/src/cs/content/jcr_root/apps/aio-aem-events/osgiconfig/config.author"},"11 default OSGI to Adobe I/O Events event mapping configurations")),(0,i.mdx)("p",null,"You can extend these and define your own mapping.\nFor more details about these refer to our ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-lib-java/tree/main/aem/events_osgi_mapping"},(0,i.mdx)("inlineCode",{parentName:"a"},"aio-aem-events-osgi-mapping")," project")),(0,i.mdx)("h2",{id:"adobe-io-events-queuing-and-retries"},"Adobe I/O Events queuing and retries"),(0,i.mdx)("p",null,"When an OSGI event of interest is triggered (i.e an OSGI events that matches one of your mapping configurations, see above),\nit makes it to a job queue handled\nby an ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-lib-java/blob/main/aem/events_ingress_aem/src/main/java/com/adobe/aio/aem/event/publish/EventPublishJobConsumer.java"},(0,i.mdx)("inlineCode",{parentName:"a"},"aio-aem-event")," Sling Job Consumer"),"."),(0,i.mdx)("p",null,"This job is persisted in the resource tree (for failover etc.), then the job is distributed\nto an instance responsible for processing the job; and on that instance the job is put into a processing queue,\nwhere eventually a Sling Job Consumer will execute it."),(0,i.mdx)("p",null,"This Adobe I/O Events Sling Job Consumer's job is to send this event to Adobe I/O."),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"JobResult.OK")," should be returned. If the job has not been processed completely,"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("inlineCode",{parentName:"li"},"JobResult.FAILED")," should be returned if Adobe I/O fails either to receive or to process it (due to network failure or Adobe I/O failure).\nIn that case the job will be rescheduled/retried"),(0,i.mdx)("li",{parentName:"ul"},"if the max number of retries is met, the process will not be rescheduled and treated like the method would have returned ",(0,i.mdx)("inlineCode",{parentName:"li"},"JobResult.CANCEL"),".")),(0,i.mdx)("p",null,"Note that"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Adobe I/O Events Sling Job Consumer topic is ",(0,i.mdx)("inlineCode",{parentName:"li"},"aio/events")),(0,i.mdx)("li",{parentName:"ul"},"Adobe I/O Events ",(0,i.mdx)("inlineCode",{parentName:"li"},"Sling Job Queue configuration")," is the default ",(0,i.mdx)("inlineCode",{parentName:"li"},"Apache Sling Job Default Queue")," with",(0,i.mdx)("ul",{parentName:"li"},(0,i.mdx)("li",{parentName:"ul"},"a Normal job priority"),(0,i.mdx)("li",{parentName:"ul"},"10 maximum retries"),(0,i.mdx)("li",{parentName:"ul"},"2 seconds retry delay"),(0,i.mdx)("li",{parentName:"ul"},"15 maximum parallel jobs")))),(0,i.mdx)("p",null,"You can tune this configuration according to your needs: using the ",(0,i.mdx)("inlineCode",{parentName:"p"},"OSGI > configuration")," menu of AEM's ",(0,i.mdx)("inlineCode",{parentName:"p"},"system console"),"\nand create there a new ",(0,i.mdx)("inlineCode",{parentName:"p"},"Apache Sling Job Queue Configuration")),(0,i.mdx)("p",null,"Note that you can use the ",(0,i.mdx)("inlineCode",{parentName:"p"},"Sling > Jobs"),"  menu of AEM ",(0,i.mdx)("inlineCode",{parentName:"p"},"system console"),",\nto look up the statistics and health of your queues"),(0,i.mdx)("p",null,"Please refer to the Sling documentation:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"https://sling.apache.org/apidocs/sling7/org/apache/sling/event/jobs/consumer/JobConsumer.html"},"https://sling.apache.org/apidocs/sling7/org/apache/sling/event/jobs/consumer/JobConsumer.html")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"https://sling.apache.org/documentation/bundles/apache-sling-eventing-and-job-handling.html"},"https://sling.apache.org/documentation/bundles/apache-sling-eventing-and-job-handling.html"))))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-using-aem-aem-addon-module-aem-advanced-configurations-md-9dc76c2521c408ed87cf.js.map