"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[9338],{81426:function(e,n,a){a.r(n),a.d(n,{_frontmatter:function(){return l},default:function(){return s}});var t=a(87462),i=a(63366),o=(a(15007),a(64983)),r=a(91515),d=["components"],l={},m={_frontmatter:l},p=r.Z;function s(e){var n=e.components,a=(0,i.Z)(e,d);return(0,o.mdx)(p,(0,t.Z)({},m,a,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"adobe-io-events-registration-api"},"Adobe I/O Events Registration API"),(0,o.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Create a project in the ",(0,o.mdx)("a",{parentName:"li",href:"/adobe-io-events/developer-console/docs/guides/projects/projects-empty/"},"Adobe Developer Console")),(0,o.mdx)("li",{parentName:"ul"},"Add the ",(0,o.mdx)("inlineCode",{parentName:"li"},"I/O Management API")," in your Adobe Developer Console project ",(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},"Click on ",(0,o.mdx)("inlineCode",{parentName:"li"},"Add to Project")," > ",(0,o.mdx)("inlineCode",{parentName:"li"},"API")),(0,o.mdx)("li",{parentName:"ul"},"Select ",(0,o.mdx)("inlineCode",{parentName:"li"},"I/O Management API")),(0,o.mdx)("li",{parentName:"ul"},"Create a new service account (JWT) credential screen, "),(0,o.mdx)("li",{parentName:"ul"},"Save"),(0,o.mdx)("li",{parentName:"ul"},"Bookmark your workspace, as you might need to come back to it more than once, to fine tune or troubleshoot your configurations."),(0,o.mdx)("li",{parentName:"ul"},"Once done, note you have a JWT credentials defined"))),(0,o.mdx)("li",{parentName:"ul"},"Note all your org, api-key and other contextual Ids",(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},"Browse to your Adobe Developer Console",(0,o.mdx)("inlineCode",{parentName:"li"},">"),"Project overview`"),(0,o.mdx)("li",{parentName:"ul"},"Click on ",(0,o.mdx)("inlineCode",{parentName:"li"},"Download"),", open the downloaded ",(0,o.mdx)("inlineCode",{parentName:"li"},"json")," file with your favorite editor, in there you'll find:",(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},"your consumer Org Id (also called ",(0,o.mdx)("inlineCode",{parentName:"li"},"consumer id"),") (at ",(0,o.mdx)("inlineCode",{parentName:"li"},"project.org.id"),")"),(0,o.mdx)("li",{parentName:"ul"},"your IMS Org Id (at ",(0,o.mdx)("inlineCode",{parentName:"li"},"project.org.ims_org_id"),")"),(0,o.mdx)("li",{parentName:"ul"},"your credential Id (also called ",(0,o.mdx)("inlineCode",{parentName:"li"},"application id"),") (at ",(0,o.mdx)("inlineCode",{parentName:"li"},"project.workspace.details.credentials[0].id"),", note that ",(0,o.mdx)("inlineCode",{parentName:"li"},"credentials")," is an array,\nif you have more than one, pick the one where you defined your jwt"),(0,o.mdx)("li",{parentName:"ul"},"your client_id (also called ",(0,o.mdx)("inlineCode",{parentName:"li"},"x-api-key"),") (at ",(0,o.mdx)("inlineCode",{parentName:"li"},"project.workspace.details.credentials[0].jwt.client_id"),"                "))))),(0,o.mdx)("li",{parentName:"ul"},"Define your webhook registration you will need :",(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},'a webhook url (accessible from the internet, reachable over HTTPS and that correctly respond to a "challenge" request) see ',(0,o.mdx)("a",{parentName:"li",href:"/adobe-io-events/guides/"},"Webhooks")),(0,o.mdx)("li",{parentName:"ul"},"a name (a user friendly name, used for display in the Adobe Developer Console)"),(0,o.mdx)("li",{parentName:"ul"},"an array of events of interests, that are defined with 2 ids",(0,o.mdx)("ul",{parentName:"li"},(0,o.mdx)("li",{parentName:"ul"},"a ",(0,o.mdx)("inlineCode",{parentName:"li"},"provider_id"),": defining one of the events source system (the events provider) your organization is entitled to,"),(0,o.mdx)("li",{parentName:"ul"},"a ",(0,o.mdx)("inlineCode",{parentName:"li"},"event_code"),": defining a type of the events the above system (the events provider) is emitting.")))))),(0,o.mdx)("ol",{start:5},(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("a",{parentName:"li",href:"/adobe-io-events/developer-console/docs/guides/credentials/"},"Generate a JWT token"))),(0,o.mdx)("h2",{id:"test-drive"},"Test Drive"),(0,o.mdx)("p",null,"Once the above are defined (and stuffed as environment variables),\nyou are ready to use our ",(0,o.mdx)("a",{parentName:"p",href:"/adobe-io-events/api/#operation/createRegistrationCli"},"registration API"),"."),(0,o.mdx)("p",null,"To help you further and document the typical ",(0,o.mdx)("inlineCode",{parentName:"p"},"Webhook Registration Payload"),",\nhere is a sample ",(0,o.mdx)("inlineCode",{parentName:"p"},"POST")," ",(0,o.mdx)("inlineCode",{parentName:"p"},"curl")," query that will create a new Webhook Registration against ",(0,o.mdx)("inlineCode",{parentName:"p"},"https://your.webhook"),"."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},'curl -v --request POST \\\n      --url https://api.adobe.io/events/${consumer_id}/${project_id}/${workspace_id}/registrations \\\n      --header "x-api-key: $api_key" \\\n      --header "Authorization: Bearer $jwt_token" \\\n      --header \'content-type: application/json\' \\\n      --header \'Accept: application/hal+json\' \\\n      --data \'{\n                "client_id": "\'"${api_key}"\'",\n                "webhook_url": "https://your.webhook",\n                "name": "a user friendly name",\n                "description": "description for the registration",\n                "events_of_interest": [\n                    { "provider_id": "some_provider",\n                      "event_code": "some_event_code"\n                    }]\n              }\'\n')),(0,o.mdx)("p",null,"Once done/",(0,o.mdx)("inlineCode",{parentName:"p"},"200")," this webhook will be POST-ed all ",(0,o.mdx)("inlineCode",{parentName:"p"},"some_event_code")," events provided by ",(0,o.mdx)("inlineCode",{parentName:"p"},"some_provider"),".",(0,o.mdx)("br",{parentName:"p"}),"\n","Below is a sample ",(0,o.mdx)("inlineCode",{parentName:"p"},"POST")," ",(0,o.mdx)("inlineCode",{parentName:"p"},"curl")," query that will create a new Journal Registration:   "),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},'curl -v --request POST \\\n      --url https://api.adobe.io/events/${consumer_id}/${project_id}/${workspace_id}/registrations \\\n      --header "x-api-key: $api_key" \\\n      --header "Authorization: Bearer $jwt_token" \\\n      --header \'content-type: application/json\' \\\n      --header \'Accept: application/hal+json\' \\\n      --data \'{\n                "client_id": "\'"${api_key}"\'",\n                "name": "a user friendly name",\n                "description": "description for the registration",\n                "events_of_interest": [\n                    { "provider_id": "some_provider",\n                      "event_code": "some_event_code"\n                    }],\n                "delivery_type": "journal"\n              }\'\n')),(0,o.mdx)("p",null,"Once successfully registered, events from the journal can then be retrieved using the ",(0,o.mdx)("a",{parentName:"p",href:"journaling_api.md"},"Journaling API"),(0,o.mdx)("br",{parentName:"p"}),"\n","If you wonder how to fetch the valid provider Ids and event codes, look at our ",(0,o.mdx)("a",{parentName:"p",href:"provider_api.md"},"Provider API")))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-api-registration-api-md-f18330c1eb7c5e1cc153.js.map